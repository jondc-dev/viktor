# Memory - 2026-02-02

## FortiGate Port Forwarding Completed
- **VIP Created:** Viktor-SSH
- **External port:** 2222
- **Internal:** 192.168.1.120:22 (Mac Studio)
- **Firewall policy:** Added to "pbx-port-forward" (policy ID 2)
- **External DDNS:** `saniserviceho.fortiddns.com`
- **SSH command:** `ssh -p 2222 victor@saniserviceho.fortiddns.com`

### FortiGate Access
- URL: https://192.168.1.1
- User: admin
- Pass: @An1Fw@0!*
- CLI works via SSH when GUI has validation bugs

### Lesson Learned
FortiGate GUI has a validation bug with 0.0.0.0 VIPs showing "Conflicts with External IP" error even when ports differ. **Use CLI** to bypass:
```
config firewall vip
edit "VIP-Name"
set extintf "wan"
set portforward enable
set mappedip "x.x.x.x"
set extport XXXX
set mappedport XX
next
end
```
Then add to firewall policy:
```
config firewall policy
edit <policy-id>
append dstaddr "VIP-Name"
next
end
```

## Email Sent to Neethu
- Sent intro email to neethu@saniservice.com (not nwethu - spelling corrected by JV)
- Standard introduction as new frontdesk team member

## Saniservice Network Info
- FortiGate WAN IP: 10.255.254.11 (private - behind ISP NAT)
- LAN: 192.168.1.0/24
- DDNS: saniserviceho.fortiddns.com (FortiGuard DDNS)

## TTS Voice Fix - RESOLVED

**Problem:** TTS tool was producing female voice despite config having correct male voice ID

**Root cause:** 
- TTS tool reads API key from `config.elevenlabs.apiKey` or env vars (`ELEVENLABS_API_KEY` / `XI_API_KEY`)
- It does NOT read from macOS keychain
- Config file was missing the API key (only had voice ID)
- Soft restarts (SIGUSR1) don't fully reload config for agent sessions

**Solution:**
1. Add API key directly to `~/.clawdbot/clawdbot.json`:
   ```json
   "messages": {
     "tts": {
       "provider": "elevenlabs",
       "elevenlabs": {
         "apiKey": "sk_8fc58afc382f...",
         "voiceId": "7iZ1bFUofSK6GtL04cm0"
       }
     }
   }
   ```
2. Full gateway restart: `launchctl bootout` then `launchctl bootstrap`

**Working config:** API key `sk_8fc58afc382f...` + Voice ID `7iZ1bFUofSK6GtL04cm0` = Male Viktor voice âœ“

**Note:** Voice notes need opus format for WhatsApp delivery (mp3 times out). Use ffmpeg to convert.
