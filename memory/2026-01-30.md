# 2026-01-30

## Voice System Upgrade to Queue-Based (v5)

**Problem:** Old voice server (v4) called Grok directly — no tools, no memory, just a dumb chatbot.

**Solution:** Queue-based architecture where voice is just I/O:
1. Voice server handles calls, STT, TTS
2. Transcribed speech → written to `~/.vonage/phone-queue.json`
3. Main agent (me) checks queue on heartbeat → processes with full tools
4. Response written to outgoing queue → voice server speaks it

**Files:**
- `/Users/victor/clawd/voice-server/server.js` — v5 queue-based server
- `~/.vonage/phone-queue.json` — queue file
- `~/.vonage/config.json` — Vonage config
- `HEARTBEAT.md` — updated to check phone queue first

**Result:** Phone callers now get full Viktor — memory, exec, web search, everything.

## Bug: Lost Voice Settings After Compaction

**Problem:** After context compaction, I forgot Viktor's voice settings and tried to change them when JV said the voice sounded wrong. But the original voice ID was correct — I just didn't check TOOLS.md first.

**Root cause:** 
- TOOLS.md is in workspace context (loaded at session start)
- After compaction, I didn't re-read it before making assumptions
- Made unnecessary changes that JV had to correct

**Lesson learned:**
- **ALWAYS read TOOLS.md before changing any tool settings**
- The configured voice ID `c6SfcYrb2t09NHXiT80T` IS Viktor's voice
- Don't assume settings are wrong without checking config files first

**Critical settings (don't lose these):**
- Viktor's voice ID: `c6SfcYrb2t09NHXiT80T` (ElevenLabs)
- Voice server keychain entries: `elevenlabs-api-key`, `elevenlabs-voice-id`

## Other
- Installed Brave browser via `brew install --cask brave-browser`
- Booked Indoor Sciences free consultation for JV: Jan 31, 2026 at 3:00 PM (video meeting)
- Attempted Careem booking — web interface only shows CareemFood, full ride booking needs mobile app
- Explored cloud emulators (BlueStacks X, now.gg) — both games-only, not general app emulators
